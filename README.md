# Online-diffusion backend server

Запуск сервера:
1) Устанавливаем docker себе на компьютер
2) Устанавливаем https://github.com/polytech-team/spring-automatic-api-client через команду `mvn clean install`
3) Устанавливаем https://github.com/AUTOMATIC1111/stable-diffusion-webui и запускаем с командой `--api`
3) Удостоверяемся, что у вашего пользователя есть права на запуск `Sudo usermod -aG docker <user>`
4) Можно запускать в IDE (Проверено в Intellij Idea Ultimate 2023.2.2)

В gen директории код менять руками не надо, либо надо только в крайних случаях, обсужденных всеми вместе
Так как этот код генерируется автоматически. Чтобы правильно поменять код в gen папке:
1) Меняем спеку файле openapi.yaml в директории resources
2) Выполняем команду ниже и смотрим на изменения
```
mvn clean compile
```
Интерфейсы поменяются в соответствии с изменениями в openapi.yaml
Консольная команда генерации:
```
sudo openapi-generator-cli generate \
-i online-diffusion.json -g spring \
\
-p interfaceOnly=true \
\
-p enumUnknownDefaultCase=true \
-p performBeanValidation=true \
-p serializableModel=true \
-p useEnumCaseInsensitive=true \
-p useSpringBoot3=true \
-p useOptional=true \
-p useTags=true \
\
-p groupId=team.polytech \
-p artifactId=online.diffusion \
-p artifactVersion=0.0.1 \
\
-p basePackage=team.polytech.online.diffusion \
-p configPackage=team.polytech.online.diffusion.config \
-p apiPackage=team.polytech.online.diffusion.api \
-p modelPackage=team.polytech.online.diffusion.model \
\
-p sourceFolder=src/main/gen
```

## Overview
This server was generated by the [OpenAPI Generator](https://openapi-generator.tech) project.
By using the [OpenAPI-Spec](https://openapis.org), you can easily generate a server stub.
This is an example of building a OpenAPI-enabled server in Java using the SpringBoot framework.


The underlying library integrating OpenAPI to Spring Boot is [springdoc](https://springdoc.org).
Springdoc will generate an OpenAPI v3 specification based on the generated Controller and Model classes.
The specification is available to download using the following url:
http://localhost:8080/v3/api-docs/

Start your server as a simple java application

You can view the api documentation in swagger-ui by pointing to
http://localhost:8080/swagger-ui.html

Change default port value in application.properties